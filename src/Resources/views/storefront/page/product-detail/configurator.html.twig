{% sw_extends '@Storefront/storefront/page/product-detail/configurator.html.twig' %}
{% block page_product_detail_configurator %}
    <div class="product-detail-configurator">
        {% set config = {
            url: url('frontend.detail.switch', { productId: page.product.parentId })
        } %}

        {% block page_product_detail_configurator_form %}
            {% block page_product_detail_configurator_option_radio_label_text %}
                {% for variantProducts in page.extensions.products.variants %}
                    <a href="{{ seoUrl('frontend.detail.page', { 'productId': variantProducts.id }) }}"
                       title="{{ variantProducts.translated.name }}">
                        <input type="radio"
                               name="{{ variantProducts.parentId }}"
                               value="{{ variantProducts.id }}"
                               title="{{ variantProducts.id }}"
                               id="{{ variantProducts.parentId.id }}"
                               {% if page.product.id == variantProducts.id %}checked="checked"{% endif %}>

                        <label class=""
                               title="{{ variantProducts.translated.name }}"
                               for="{{ parentId.id  }}">

                            {{ variantProducts.translated.name }}

                        </label>
                    </a>
                {% endfor %}
            {% endblock %}
            <form data-variant-switch="true" data-variant-switch-options="{{ config|json_encode }}">
                {% block page_product_detail_configurator_groups %}
                    {% for group in page.configuratorSettings %}
                        {% block page_product_detail_configurator_group %}
                            <div class="product-detail-configurator-group">
                                {% if group.displayType == 'select' %}
                                    {% sw_include '@Storefront/storefront/page/product-detail/configurator/select.html.twig' %}
                                {% else %}
                                    {% block page_product_detail_configurator_group_title %}
                                        <div class="product-detail-configurator-group-title">
                                            {% block page_product_detail_configurator_group_title_text %}
                                                {{ group.translated.name }}
                                            {% endblock %}
                                        </div>
                                    {% endblock %}

                                    {% block page_product_detail_configurator_options %}
                                        <div class="product-detail-configurator-options">
{#                                            {% for option in group.options %}#}

{#                                                {% set optionIdentifier = [group.id, option.id]|join('-') %}#}
{#                                                {% set isActive = false %}#}
{#                                                {% set isCombinableCls = 'is-combinable' %}#}

{#                                                {% if option.id in page.product.optionIds %}#}
{#                                                    {% set isActive = true %}#}
{#                                                {% endif %}#}

{#                                                {% if not option.combinable %}#}
{#                                                    {% set isCombinableCls = false %}#}
{#                                                {% endif %}#}

{#                                                {% if option.configuratorSetting.media %}#}
{#                                                    {% set displayType = 'media' %}#}
{#                                                    {% set media = option.configuratorSetting.media %}#}
{#                                                {% else %}#}
{#                                                    {% set displayType = group.displayType %}#}
{#                                                    {% if option.media %}#}
{#                                                        {% set media = option.media %}#}
{#                                                    {% else %}#}
{#                                                        {% set media = false %}#}
{#                                                    {% endif %}#}
{#                                                {% endif %}#}

{#                                                {% block page_product_detail_configurator_option %}#}
{#                                                    <div class="product-detail-configurator-option">#}
{#                                                        <input type="radio"#}
{#                                                               name="{{ group.id }}"#}
{#                                                               value="{{ option.id }}"#}
{#                                                               class="product-detail-configurator-option-input{% if isCombinableCls %} {{ isCombinableCls }}{% endif %}"#}
{#                                                               title="{{ optionIdentifier }}"#}
{#                                                               id="{{ optionIdentifier }}"#}
{#                                                               {% if isActive %}checked="checked"{% endif %}>#}

{#                                                        <label class=""#}
{#                                                               title="{{ option.translated.name }}"#}
{#                                                               for="{{ optionIdentifier }}">#}


{#                                                            #}
{#                                                        </label>#}
{#                                                    </div>#}
{#                                                {% endblock %}#}
{#                                            {% endfor %}#}

                                        </div>

                                    {% endblock %}
                                {% endif %}
                            </div>
                        {% endblock %}
                    {% endfor %}
                {% endblock %}
            </form>
        {% endblock %}
    </div>
{% endblock %}
