<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <service id="Pluszwei\FaqManager\Resources\snippet\de_DE\SnippetFile_de_DE" public="true">
            <tag name="shopware.snippet.file"/>
        </service>

        <service id="Pluszwei\FaqManager\Resources\snippet\en_GB\SnippetFile_en_GB" public="true">
            <tag name="shopware.snippet.file"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\CategoryDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_category"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\Translation\CategoryTranslationDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_category_translation"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\Aggregate\ArticleSalesChannelDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_article_sales_channel"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\Aggregate\CategorySalesChannelDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_category_sales_channel"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\ArticleDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_article"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\Translation\ArticleTranslationDefinition">
            <tag name="shopware.entity.definition" entity="pluszwei_faq_article_translation"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\DataAbstractionLayer\CategoryBreadcrumbUpdater">
            <argument type="service" id="Doctrine\DBAL\Connection"/>
            <argument type="service" id="pluszwei_faq_category.repository"/>
            <argument type="service" id="language.repository"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\CategoryIndexer">
            <argument id="Doctrine\DBAL\Connection" type="service"/>
            <argument id="pluszwei_faq_category.repository" type="service"/>
            <argument id="Shopware\Core\Framework\DataAbstractionLayer\Indexing\ChildCountUpdater" type="service"/>
            <argument id="Shopware\Core\Framework\DataAbstractionLayer\Indexing\TreeUpdater" type="service"/>
            <argument id="Shopware\Core\Framework\DataAbstractionLayer\Dbal\Common\IteratorFactory" type="service"/>
            <argument id="Pluszwei\FaqManager\Core\Content\Category\DataAbstractionLayer\CategoryBreadcrumbUpdater" type="service"/>
            <argument id="Shopware\Core\Content\Seo\SeoUrlUpdater" type="service"/>
            <tag name="shopware.entity_indexer"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\CategoryBreadcrumbBuilder"/>

        <service id="Pluszwei\FaqManager\Core\Content\Category\CategorySeoUrlRoute">
            <argument id="Pluszwei\FaqManager\Core\Content\Category\CategoryDefinition" type="service"/>
            <argument id="Pluszwei\FaqManager\Core\Content\Category\CategoryBreadcrumbBuilder" type="service"/>
            <argument id="Shopware\Storefront\Framework\Seo\SeoUrlRoute\NavigationPageSeoUrlRoute" type="service"/>
            <tag name="shopware.seo_url.route"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\ArticleSeoUrlRoute">
            <argument id="Pluszwei\FaqManager\Core\Content\Article\ArticleDefinition" type="service"/>
            <argument id="Pluszwei\FaqManager\Core\Content\Category\CategorySeoUrlRoute" type="service"/>
            <tag name="shopware.seo_url.route"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\ArticleIndexer">
            <argument id="Doctrine\DBAL\Connection" type="service"/>
            <argument id="Shopware\Core\Framework\DataAbstractionLayer\Dbal\Common\IteratorFactory" type="service"/>
            <argument id="Shopware\Core\Content\Seo\SeoUrlUpdater" type="service"/>
            <argument id="pluszwei_faq_article.repository" type="service"/>
            <tag name="shopware.entity_indexer"/>
        </service>

        <service id="Pluszwei\FaqManager\Storefront\Controller\FaqController" public="true">
            <argument id="Shopware\Storefront\Page\GenericPageLoader" type="service"/>
            <argument id="Shopware\Core\System\SystemConfig\SystemConfigService" type="service"/>
            <argument type="service" id="event_dispatcher"/>

            <call method="setContainer">
                <argument type="service" id="service_container"/>
            </call>
            <call method="setTwig">
                <argument type="service" id="twig"/>
            </call>
        </service>

        <service id="Pluszwei\FaqManager\Storefront\FaqLoader" public="true">
            <argument id="pluszwei_faq_article.repository" type="service"/>
            <argument id="pluszwei_faq_category.repository" type="service"/>
            <argument id="Doctrine\DBAL\Connection" type="service"/>
        </service>

        <service id="Pluszwei\FaqManager\Storefront\NavigationPageLoadedSubscriber">
            <argument id="Pluszwei\FaqManager\Storefront\FaqLoader" type="service"/>
            <tag name="kernel.event_subscriber"/>
        </service>

        <service id="Pluszwei\FaqManager\NavigationAssignment\UpdateNavigationPage">
            <argument id="pluszwei_faq_category.repository" type="service"/>
            <argument id="pluszwei_faq_article.repository" type="service"/>
            <argument id="Shopware\Core\Content\Seo\SeoUrlUpdater" type="service"/>
        </service>

        <service id="Pluszwei\FaqManager\NavigationAssignment\SwCategorySubscriber">
            <argument id="category.repository" type="service"/>
            <argument id="Pluszwei\FaqManager\NavigationAssignment\UpdateNavigationPage" type="service"/>
            <tag name="kernel.event_subscriber"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Category\CategorySubscriber">
            <argument id="Shopware\Core\Content\Seo\SeoUrlUpdater" type="service"/>
            <argument id="category.repository" type="service"/>
            <argument id="Pluszwei\FaqManager\NavigationAssignment\UpdateNavigationPage" type="service"/>
            <tag name="kernel.event_subscriber"/>
        </service>

        <service id="Pluszwei\FaqManager\Core\Content\Article\ArticleSubscriber">
            <argument id="Shopware\Core\Content\Seo\SeoUrlUpdater" type="service"/>
            <argument id="category.repository" type="service"/>
            <argument id="Pluszwei\FaqManager\NavigationAssignment\UpdateNavigationPage" type="service"/>
            <tag name="kernel.event_subscriber"/>
        </service>

    </services>
</container>