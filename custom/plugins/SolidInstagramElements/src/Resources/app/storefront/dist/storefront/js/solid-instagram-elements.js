"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["solid-instagram-elements"],{1134:(e,t,r)=>{var a=r(6285);const n=JSON.parse('{"seconds":"Vor ein paar Sekunden","minutes":{"singular":"Vor %m Minute","plural":"Vor %m Minuten"},"hours":{"singluar":"Vor %h Stunde","plural":"Vor %h Stunden"},"days":{"singular":"Vor %d Tag","plural":"Vor %d Tagen"},"date":{"months":["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],"short":"%d. %mmmm","long":"%d. %mmmm %yyyy"}}'),s=JSON.parse('{"seconds":"A few seconds ago","minutes":{"singular":"%m minute ago","plural":"%m minutes ago"},"hours":{"singluar":"%h hour ago","plural":"%h hours ago"},"days":{"singular":"%d day ago","plural":"%d days ago"},"date":{"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"short":"%mmmm %do","long":"%mmmm %do %yyyy"}}');class i extends a.Z{async init(){const e=this.getAccessToken();if(!e)return void this.handleMissingAccessToken();const t=await this.fetchLatestFeedData(e);t?this.appendData(t):this.handleErrorWhileFetching()}getAccessToken(){return!!window.solidIEAT&&window.solidIEAT.replaceAll("-","Z").replaceAll("+","A").split("").reverse().join("")}getUsername(){return!!window.solidIEU&&window.solidIEU}getErrorMessage(){return window.solidIEEM?window.solidIEEM:"An error occurred while trying to fetch your Instagram data."}async fetchLatestFeedData(e){try{const t=await fetch("https://graph.instagram.com/me/media?fields=username,caption,media_type,media_url,permalink,thumbnail_url,timestamp,children{media_url}&access_token="+e);if(!t.ok)throw Error("Response not ok, "+t.status);const r=await t.json();if(!r.data)throw new Error("Unexpected structure in response: "+r);return r.data}catch(e){console.error("Error fetching posts: "+e)}return!1}handleMissingAccessToken(){console.error("Instagram access token is missing.")}handleErrorWhileFetching(){console.error("Error while trying to fetch data.");const e=document.createElement("div");e.className="alert-content",e.innerHTML=this.getErrorMessage();const t=document.createElement("div");t.className="alert-content-container",t.appendChild(e);const r=document.createElement("div");r.className="alert alert-danger",r.role="alert",r.appendChild(t),this.el.parentElement.prepend(r)}appendData(e){this.el.querySelectorAll(this.options.itemSelector).forEach(((t,r)=>{if(e[r]){const a=this.getUsername(),n=t.querySelector(this.options.usernameSelector);a&&n&&(n.innerHTML=a);const s=t.querySelector(this.options.dateSelector);if(s){const t=this.getInstagramFormatedDate(new Date(e[r].timestamp));s.innerHTML=t}const i=t.querySelector(this.options.captionSelector);i&&(i.innerHTML=e[r].caption);const o=t.querySelector(this.options.permalinkPlaceholderSelector);if(o){const t=document.createElement("a");t.href=e[r].permalink,t.className="permalink "+this.options.permalinkClass,t.title=o.title||"Instagram",t.innerHTML=o.innerHTML,t.target="_blank",t.rel="noopener noreferrer",o.parentElement.append(t),o.remove()}const l=t.querySelector(".image-container");if(l){const a=document.createElement("img"),n=e[r].media_type;switch(n){case"CAROUSEL_ALBUM":if(!e[r].media_url&&e[r].children&&e[r].children.data&&e[r].children.data[0]&&e[r].children.data[0].media_url){a.src=e[r].children.data[0].media_url;break}a.src=e[r].media_url;break;case"VIDEO":a.src=e[r].thumbnail_url;break;default:a.src=e[r].media_url}a.alt="Instagram",a.title="Instagram",a.addEventListener("load",(()=>{t.classList.remove("loading")})),l.classList.add(n.toLowerCase().replaceAll("_","-")),l.appendChild(a)}}}))}getInstagramFormatedDate(e){let t=new Date-e,r=document.documentElement.getAttribute("lang");if(Object.prototype.hasOwnProperty.call(this.options.snippets,r)||(r=this.options.fallbackLocale),t/=1e3,t<60)return this.options.snippets[r].seconds;if(t/=60,t<60){const e=parseInt(t,10);return 1===e?this.options.snippets[r].minutes.singular.replaceAll("%m",e):this.options.snippets[r].minutes.plural.replaceAll("%m",e)}if(t/=60,t<24){const e=parseInt(t,10);return 1===e?this.options.snippets[r].hours.singular.replaceAll("%h",e):this.options.snippets[r].hours.plural.replaceAll("%h",e)}if(t/=24,t<7){const e=parseInt(t,10);return 1===e?this.options.snippets[r].days.singular.replaceAll("%d",e):this.options.snippets[r].days.plural.replaceAll("%d",e)}t/=365;const a=e.getDate(),n=this.options.snippets[r].date.months[e.getMonth()];let s="";switch(a%10){case 1:s="st";break;case 2:s="nd";break;case 3:s="rd";break;default:s="th"}return t<1?this.options.snippets[r].date.short.replaceAll("%do",a+s).replaceAll("%d",a).replaceAll("%mmmm",n):this.options.snippets[r].date.long.replaceAll("%do",a+s).replaceAll("%d",a).replaceAll("%mmmm",n).replaceAll("%yyyy",e.getFullYear())}}var o,l,c;o=i,c={itemSelector:"[data-feed-item]",usernameSelector:"[data-insert-username]",dateSelector:"[data-insert-date]",captionSelector:"[data-insert-caption]",permalinkPlaceholderSelector:"[data-replace-permalink]",permalinkClass:"stretched-link",imageContainerSelector:"[data-append-image]",snippets:{"en-GB":s,"de-DE":n},fallbackLocale:"en-GB"},(l=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(l="options"))in o?Object.defineProperty(o,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[l]=c;window.PluginManager.register("SolidIEFeedPlugin",i,".solid-ie-feed-meta-cdn")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=1134,e(e.s=t);var t}));e.O()}]);