"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["i-c-t-e-c-h-newsletter-with-promotion"],{5876:(e,t,r)=>{var i=r(6285);class o extends i.Z{init(){this._popupId=this.el.getAttribute("data-popup-id");const e=this.el.getAttribute("data-dev-mode");if(this._storageType=this.el.getAttribute("data-storage-type"),!this._popupId)return;this._popupClosedStorageName=`${this._popupId}-closed`;let t=!1;if(t="sessionStorage"===this._storageType?sessionStorage.getItem(this._popupClosedStorageName):localStorage.getItem(this._popupClosedStorageName),t&&!e)return;const r=this.el.getAttribute("data-popup-trigger"),i=`${this.el.getAttribute("data-popup-time")}000`;"time"===r?(this.openPopupByTime=this.openPopupByTime.bind(this),window.setTimeout(this.openPopupByTime,i)):(this.openPopupByScroll=this.openPopupByScroll.bind(this),window.addEventListener("scroll",this.openPopupByScroll));const o=this.el.querySelector(".ict-newsletter-popup--close-btn"),s=this.el.querySelector(".ict-newsletter-popup--non-subscribe-btn"),n=document.querySelector(".ict-newsletter-popup--bg-layer");this.closePopup=this.closePopup.bind(this),o.addEventListener("click",this.closePopup),s.addEventListener("click",this.closePopup),n.addEventListener("click",this.closePopup)}openPopupByTime(){this.openPopup()}openPopupByScroll(){const e=this.el.getAttribute("data-popup-scroll");if(window.scrollY>=e){if(this.el.classList.contains("opened"))return null;this.openPopup(),this.el.classList.add("opened")}}openPopup(){const e=this.el;document.querySelector(".ict-newsletter-popup--bg-layer").classList.add("open"),e.classList.add("open")}closePopup(){this.el.classList.remove("open");var e;document.querySelector(".ict-newsletter-popup--bg-layer").classList.remove("open"),this._popupId&&("sessionStorage"===this._storageType?(e=this._popupClosedStorageName,sessionStorage.setItem(e,"1")):(e=>{localStorage.setItem(e,"1")})(this._popupClosedStorageName))}}var s,n,p,a=r(8254);class l extends i.Z{init(){if("FORM"!==this.el.nodeName)throw new Error("Plugin NewsletterPopupForm must be initialized on an element of type FORM");this._formElement=this.el,this._popupParent=this.el.closest("[data-newsletter-popup]"),this._popupParent&&(this._errorContainer=this._popupParent.querySelector(".ict-newsletter-popup--error-container"),this._captchaErrorContainer=this._popupParent.querySelector(".ict-newsletter-popup--captcha-error-container"),this._submitButton=this._formElement.querySelector('button[type="submit"]'),this._httpClient=new a.Z,this._isSubmitting=!1,this._formElement.addEventListener("submit",(e=>{e.preventDefault(),this.submitForm()})))}submitForm(){if(this._isSubmitting)return;if(!1===this._formElement.checkValidity())return;const e=new FormData(this._formElement);if(!e.get("email")||!e.get("privacy"))return;const t={};for(let[r,i]of e.entries())t[r]=i;this._isSubmitting=!0;try{this._httpClient.post(this._formElement.action,JSON.stringify({...t,option:"subscribe"}),(e=>{let t;try{t=JSON.parse(e)}catch(e){}const r=this._popupParent.querySelector(".ict-newsletter-popup--content-inner"),i=this._popupParent.querySelector(".ict-newsletter-popup--response-wrapper"),o=i.querySelector(".ict-newsletter-popup--response-text");if(Array.isArray(t)&&t.length&&t[0]&&t[0].alert){const e=t[0].alert,s=t[0].error,n="success"!==t[0].type;this._errorContainer.innerHTML="",this._captchaErrorContainer.innerHTML="",s?"invalid_captcha"===s?this._captchaErrorContainer.innerHTML=e:this._errorContainer.innerHTML=e:n?this._errorContainer.innerHTML=e:(o.textContent=e,r.classList.add("hide"),i.classList.add("open"))}else this._errorContainer.innerHTML='\n                                <div role="alert" class="alert-danger">\n                                    <div class="alert-content-container">\n                                        <div class="alert-content">Unknown Error. Please contact the shop support.</div>\n                                    </div>\n                                </div>\n                            ';this._isSubmitting=!1}))}catch(e){console.error(e),this._isSubmitting=!1}}sendAjaxFormSubmit(){this.submitForm()}}s=l,p={useAjax:!0},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n="options"))in s?Object.defineProperty(s,n,{value:p,enumerable:!0,configurable:!0,writable:!0}):s[n]=p;const u=window.PluginManager;u.register("IctNewsletterPopup",o,"[data-newsletter-popup]"),u.register("IctNewsletterPopupForm",l,"[data-newsletter-popup-form]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=5876,e(e.s=t);var t}));e.O()}]);